<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:cyk="http://primefaces.jsf.web.utility.cyk.org">
	
	<ui:insert name="beforeDataTable">
		<ui:decorate template="#{primefacesHelper.getModelTemplate(dataTable.title)}">
	 		<ui:param name="outputText" value="#{dataTable.title}"/>
	 	</ui:decorate>
	</ui:insert>
	<p:dataTable
		id="#{dataTable.identifier}" value="#{dataTable.value}" var="record" emptyMessage="#{dataTable.emptyMessage}"
   		lazy="#{dataTable.lazy}" rows="#{dataTable.rows}" paginator="#{dataTable.paginator}" rowsPerPageTemplate="#{dataTable.rowsPerPageTemplate}" 
   		paginatorAlwaysVisible="#{dataTable.paginatorAlwaysVisible}"
		paginatorTemplate="#{dataTable.paginatorTemplate}" currentPageReportTemplate="#{dataTable.currentPageReportTemplate}"
		widgetVar="#{dataTable.widgetVar}" rowIndexVar="rowIndex" filterDelay="#{dataTable.filterDelay}" selection="#{dataTable.selection}"
		rowStyleClass="#{dataTable.getStyleClassByRecord(record,rowIndex)}" 
		editable="#{dataTable.editable}" editMode="#{dataTable.editMode}"
	>
		<ui:include src="__header__.xhtml"/>
 		
 		<ui:insert name="columns">
 			<ui:insert name="columnRowIndex">
 				<ui:decorate template="/collection/datatable/column/default.xhtml">
 					<ui:param name="column" value="#{dataTable.orderNumberColumn}"/>
 					<ui:define name="columnHeader">
 						<!-- Align # to right of check box -->
		 				<div style="float: left !important;">
			 				<h:outputText value="#" />
			 			</div>
 					</ui:define>
 					<ui:define name="columnBody">
 						<!-- Align order number to right of check box -->
		 				<div style="float: left !important;">
			 				<h:outputText value="#{rowIndex+1}" />
			 			</div>
 					</ui:define>
 					
 					<ui:define name="columnFooter">
 						<ui:insert name="columnFooterOrderNumber">
 							<ui:fragment rendered="#{dataTable.isRowAddable}">
	 							<ui:decorate template="#{primefacesHelper.getModelTemplate(dataTable.addRowCommandButton)}">
									<ui:param name="commandButton" value="#{dataTable.addRowCommandButton}"/>
								</ui:decorate>	
							</ui:fragment>
 						</ui:insert>
 					</ui:define>
 				</ui:decorate>
	 		</ui:insert>
	 		
	 		<ui:insert name="columnsAfterRowIndex">
	 			<!-- field="#{column.field}" -->
	 			<ui:decorate template="__columns__.xhtml">
					<ui:define name="columnsBody">		 				
		 				<f:facet name="header">
							<ui:insert name="columnsAfterRowIndexHeaders">
								<ui:fragment rendered="#{columnIndex == 0}">
									<ui:insert name="columnsAfterRowIndexHeaders0">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 1}">
									<ui:insert name="columnsAfterRowIndexHeaders1">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 2}">
									<ui:insert name="columnsAfterRowIndexHeaders2">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 3}">
									<ui:insert name="columnsAfterRowIndexHeaders3">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 4}">
									<ui:insert name="columnsAfterRowIndexHeaders4">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 5}">
									<ui:insert name="columnsAfterRowIndexHeaders5">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 6}">
									<ui:insert name="columnsAfterRowIndexHeaders6">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 7}">
									<ui:insert name="columnsAfterRowIndexHeaders7">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 8}">
									<ui:insert name="columnsAfterRowIndexHeaders8">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
								<ui:fragment rendered="#{columnIndex == 9}">
									<ui:insert name="columnsAfterRowIndexHeaders9">
										<ui:include src="__columnsAfterRowIndexHeader__.xhtml"/>
									</ui:insert>
								</ui:fragment>
							</ui:insert>
						</f:facet>
				
						<ui:decorate template="__columns__filter.xhtml" />
						<!--
						<ui:insert name="columnsAfterRowIndexFiltersFacet">
							<f:facet name="filter">
								<ui:insert name="columnsAfterRowIndexFiltersFacetControl">
									<p:inputText id="columnsAfterRowIndexFiltersFacetControl" placeholder="Rechercher..." rendered="#{not empty column.filterBy}">									
										<p:ajax delay="#{dataTable.filterDelay}" event="keyup" oncomplete="if(event.keyCode != 13) PF('#{dataTable.widgetVar}').filter();" partialSubmit="true" global="false"/>									
										<p:ajax event="keypress" oncomplete="if(event.keyCode == 13) PF('#{dataTable.widgetVar}').filter();" partialSubmit="true" global="false"/>
									</p:inputText>															
								</ui:insert>
							</f:facet>
						</ui:insert>
						-->
						<ui:insert name="columnsAfterRowIndexBodies">						
							<ui:fragment rendered="#{columnIndex == 0}">
								<ui:insert name="columnsAfterRowIndexBodies0">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 1}">
								<ui:insert name="columnsAfterRowIndexBodies1">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 2}">
								<ui:insert name="columnsAfterRowIndexBodies2">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 3}">
								<ui:insert name="columnsAfterRowIndexBodies3">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 4}">
								<ui:insert name="columnsAfterRowIndexBodies4">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 5}">
								<ui:insert name="columnsAfterRowIndexBodies5">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 6}">
								<ui:insert name="columnsAfterRowIndexBodies6">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 7}">
								<ui:insert name="columnsAfterRowIndexBodies7">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 8}">
								<ui:insert name="columnsAfterRowIndexBodies8">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
							
							<ui:fragment rendered="#{columnIndex == 9}">
								<ui:insert name="columnsAfterRowIndexBodies9">
									<ui:include src="__columnsAfterRowIndexBodies__.xhtml"/>
								</ui:insert>
							</ui:fragment>
						</ui:insert>
					</ui:define>
	 			</ui:decorate>
	 		</ui:insert>
	 		
	 		<ui:insert name="columnMenu">
	 			<ui:decorate template="/collection/datatable/column/default.xhtml">
 					<ui:param name="column" value="#{dataTable.menuColumn}"/>
 					<ui:define name="columnHeader">
 						<ui:insert name="columnMenuHeader">
 							<!-- Nothing -->
 						</ui:insert>						
 					</ui:define>
 					<ui:define name="columnBody">
 						<ui:insert name="columnMenuCommands">
 							<!-- Commands in menu button in order to occupy less space -->
 							<ui:decorate template="/menu/button/default.xhtml">
    							<ui:param name="menuButton" value="#{dataTable.recordMenu}"/>
    							<ui:param name="actionArgument" value="#{record}"/>
    						</ui:decorate>
 						</ui:insert>	 						
 					</ui:define>
 				</ui:decorate>
	 		</ui:insert> 			 		
 		</ui:insert>

 		<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('page')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('sort')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('filter')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('rowSelect')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('rowUnselect')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('rowSelectCheckbox')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('rowUnselectCheckbox')}"/>
	 	</ui:decorate>
	 	<ui:decorate template="/ajax/default.xhtml">
	 		<ui:param name="ajax" value="#{dataTable.ajaxes.get('cellEdit')}"/>
	 	</ui:decorate>
	 	
 	</p:dataTable>
 	
 	<ui:insert name="afterDataTable"/>
 	
 	<ui:decorate template="/blockui/default.xhtml">
 		<ui:param name="blockUI" value="#{dataTable.blockUI}"/>
 	</ui:decorate>
 	
 	<ui:decorate template="/panel/output/default.xhtml">
 		<ui:param name="outputPanel" value="#{dataTable.dialogOutputPanel}"/>
 		<ui:define name="outputPanelBody">
 			<ui:decorate template="/dialog/default.xhtml">
 				<ui:param name="dialog" value="#{dataTable.dialog}"/>
 				<ui:define name="dialogBody">
 					<ui:insert name="dataTableDialogBody">
 						<ui:insert name="dataTableDialogBodyDataTableBefore"/>
 						<ui:insert name="dataTableDialogBodyDataTable">
 							<p:dataTable value="#{dataTable.selection}" var="selected" rowIndexVar="selectedRowIndex" rendered="#{dataTable.isSelectionShowableInDialog}">
 								<ui:insert name="dataTableDialogBodyDataTableColumnRowIndex">
 									<p:column headerText="#" width="40"><h:outputText value="#{selectedRowIndex+1}"/></p:column>
 								</ui:insert>
		 						<ui:insert name="dataTableDialogBodyDataTableColumnsAfterRowIndex">
 									<p:columns value="#{dataTable.selectedColumnsAfterRowIndex == null ? dataTable.columnsAfterRowIndex : dataTable.selectedColumnsAfterRowIndex}" 
 										var="column" columnIndexVar="columnIndex" width="#{column.width}">
						 				<f:facet name="header">
											<ui:insert name="dataTableDialogBodyDataTableColumnsAfterRowIndexHeaders">
												<h:outputText value="#{column.headerText}" />
											</ui:insert>
										</f:facet>
										
										<ui:insert name="dataTableDialogBodyDataTableColumnsAfterRowIndexBodies">
											<h:outputText value="#{selected[column.fieldName]}" />
										</ui:insert>
										
										<ui:insert name="footer"/>										
						 			</p:columns>
 								</ui:insert>	
		 					</p:dataTable>
 						</ui:insert>
 						<ui:insert name="dataTableDialogBodyDataTableAfter"/>
 					</ui:insert>
    			</ui:define> 				
		 	</ui:decorate>
 		</ui:define>
 	</ui:decorate>
 	
</ui:composition>